{"ast":null,"code":"var _jsxFileName = \"/home/smccu726/projects/numerology-frontend/src/components/CreateProfile.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport axios from \"axios\";\nimport ProfileForm from \"./ProfileForm\";\nimport UserProfile from \"./UserProfile\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst CreateProfile = () => {\n  _s();\n\n  const [userProfiles, setUserProfiles] = useState([]);\n  const [error, setError] = useState(undefined);\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const [showEdit, setShowEdit] = useState(false);\n\n  const handleCloseEdit = () => setShowEdit(false);\n\n  const handleShowEdit = () => setShowEdit(true);\n\n  const {\n    isLoading,\n    user: {\n      email\n    }\n  } = useAuth0();\n\n  const handleUserProfileEdit = async (updatedProfile, id) => {\n    try {\n      await axios.put(`https://numerology-app-server.herokuapp.com/profile/${id}`, updatedProfile);\n      const {\n        data\n      } = await axios.get(\"https://numerology-app-server.herokuapp.com/profiles/user\", {\n        params: {\n          email\n        }\n      });\n      setUserProfiles(data);\n      handleCloseEdit();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleUserProfileAdd = async (newProfile, email) => {\n    try {\n      await axios.post(\"https://numerology-app-server.herokuapp.com/profiles\", {\n        name: newProfile.name,\n        birthMonth: Number(newProfile.birthMonth),\n        birthDay: Number(newProfile.birthDay),\n        birthYear: Number(newProfile.birthYear),\n        gender: newProfile.gender,\n        email\n      });\n      const {\n        data\n      } = await axios.get(\"https://numerology-app-server.herokuapp.com/profiles/user\", {\n        params: {\n          email\n        }\n      });\n      setUserProfiles(data);\n      handleClose();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleProfileDelete = async (userEmail, profileId) => {\n    await axios.delete(`https://numerology-app-server.herokuapp.com/profile/${profileId}`, {\n      params: {\n        email: userEmail\n      }\n    });\n    const {\n      data\n    } = await axios.get(\"https://numerology-app-server.herokuapp.com/profiles/user\", {\n      params: {\n        email\n      }\n    });\n    setUserProfiles(data);\n  };\n\n  useEffect(() => {\n    const fetchUserProfiles = async () => {\n      try {\n        const {\n          data\n        } = await axios.get(\"https://numerology-app-server.herokuapp.com/profiles/user\", {\n          params: {\n            email\n          }\n        });\n        setUserProfiles(data);\n        error && setError(undefined);\n      } catch (err) {\n        setError({\n          status: err.response.status,\n          errMsg: \"Couldn't fetch life paths from db\"\n        });\n      }\n    };\n\n    fetchUserProfiles();\n  }, [email, error]);\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 25\n  }, this);\n  return userProfiles.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(UserProfile, {\n      userProfile: userProfiles[0],\n      otherProfiles: userProfiles.slice(1),\n      show: show,\n      handleClose: handleClose,\n      handleShow: handleShow,\n      showEdit: showEdit,\n      handleCloseEdit: handleCloseEdit,\n      handleShowEdit: handleShowEdit,\n      handleProfileDelete: handleProfileDelete,\n      handleUserProfileAdd: handleUserProfileAdd,\n      handleUserProfileEdit: handleUserProfileEdit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }, this)\n  }, void 0, false) : /*#__PURE__*/_jsxDEV(ProfileForm, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CreateProfile, \"K/Ynbd1X4wSbJKYAKC9w1SmCB3c=\", false, function () {\n  return [useAuth0];\n});\n\n_c = CreateProfile;\nexport default CreateProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateProfile\");","map":{"version":3,"sources":["/home/smccu726/projects/numerology-frontend/src/components/CreateProfile.js"],"names":["useState","useEffect","useAuth0","axios","ProfileForm","UserProfile","CreateProfile","userProfiles","setUserProfiles","error","setError","undefined","show","setShow","handleClose","handleShow","showEdit","setShowEdit","handleCloseEdit","handleShowEdit","isLoading","user","email","handleUserProfileEdit","updatedProfile","id","put","data","get","params","console","log","handleUserProfileAdd","newProfile","post","name","birthMonth","Number","birthDay","birthYear","gender","handleProfileDelete","userEmail","profileId","delete","fetchUserProfiles","err","status","response","errMsg","length","slice"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport axios from \"axios\";\r\nimport ProfileForm from \"./ProfileForm\";\r\nimport UserProfile from \"./UserProfile\";\r\n\r\nconst CreateProfile = () => {\r\n  const [userProfiles, setUserProfiles] = useState([]);\r\n  const [error, setError] = useState(undefined);\r\n\r\n\r\n  const [show, setShow] = useState(false);\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const [showEdit, setShowEdit] = useState(false);\r\n\r\n  const handleCloseEdit = () => setShowEdit(false);\r\n  const handleShowEdit = () => setShowEdit(true);\r\n\r\n  const {\r\n    isLoading,\r\n    user: { email },\r\n  } = useAuth0();\r\n\r\n  const handleUserProfileEdit = async (updatedProfile,id) => {\r\n    try {\r\n      await axios.put(`https://numerology-app-server.herokuapp.com/profile/${id}`, updatedProfile);\r\n      const { data } = await axios.get(\"https://numerology-app-server.herokuapp.com/profiles/user\", {\r\n        params: { email },\r\n      });\r\n      setUserProfiles(data);\r\n      handleCloseEdit()\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n  }\r\n\r\n  const handleUserProfileAdd = async (newProfile, email) => {\r\n    try {\r\n      await axios.post(\"https://numerology-app-server.herokuapp.com/profiles\", {\r\n        name: newProfile.name,\r\n        birthMonth: Number(newProfile.birthMonth),\r\n        birthDay: Number(newProfile.birthDay),\r\n        birthYear: Number(newProfile.birthYear),\r\n        gender: newProfile.gender,\r\n        email,\r\n      });\r\n      const { data } = await axios.get(\"https://numerology-app-server.herokuapp.com/profiles/user\", {\r\n        params: { email },\r\n      });\r\n      setUserProfiles(data);\r\n      handleClose()\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleProfileDelete = async (userEmail, profileId) => {\r\n    await axios.delete(`https://numerology-app-server.herokuapp.com/profile/${profileId}`, {\r\n      params: {\r\n        email: userEmail,\r\n      },\r\n    });\r\n\r\n    const { data } = await axios.get(\"https://numerology-app-server.herokuapp.com/profiles/user\", {\r\n      params: { email },\r\n    });\r\n    setUserProfiles(data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchUserProfiles = async () => {\r\n      try {\r\n        const { data } = await axios.get(\r\n          \"https://numerology-app-server.herokuapp.com/profiles/user\",\r\n          {\r\n            params: { email },\r\n          }\r\n        );\r\n        setUserProfiles(data);\r\n        error && setError(undefined);\r\n      } catch (err) {\r\n        setError({\r\n          status: err.response.status,\r\n          errMsg: \"Couldn't fetch life paths from db\",\r\n        });\r\n      }\r\n    };\r\n    fetchUserProfiles();\r\n  }, [email, error]);\r\n\r\n  if (isLoading) return <h1>Loading...</h1>;\r\n\r\n  return userProfiles.length > 0 ? (\r\n    <>\r\n\r\n    <UserProfile\r\n      userProfile={userProfiles[0]}\r\n      otherProfiles={userProfiles.slice(1)}\r\n      show={show}\r\n      handleClose={handleClose}\r\n      handleShow={handleShow}\r\n      showEdit={showEdit}\r\n      handleCloseEdit={handleCloseEdit}\r\n      handleShowEdit={handleShowEdit}\r\n      handleProfileDelete={handleProfileDelete}\r\n      handleUserProfileAdd={handleUserProfileAdd}\r\n      handleUserProfileEdit={handleUserProfileEdit}\r\n    />\r\n    </>\r\n  ) : ( <ProfileForm />\r\n  \r\n  );\r\n};\r\n\r\nexport default CreateProfile;\r\n"]},"metadata":{},"sourceType":"module"}